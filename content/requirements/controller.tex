% Begin Controller
\subsection{Controller}

\subitem{
    The Controller computes actuator setpoints from planned trajectories and state estimates.
    It implements required control algorithms and scheduling, ensuring safe and efficient operation
    of the UAV actuators. The Controller is comprised of four submodules: Preprocessor, PVA Controller,
    ATL Controller, and Control Distributor. Each submodule contributes to translating planned trajectories
    into actuator commands.
}

\subsubsection{Interfaces}
\paragraph{Inputs}
\begin{enumerate}
    \item Planned trajectories and state estimates
\end{enumerate}
\paragraph{Outputs}
\begin{enumerate}
    \item Actuator setpoints
\end{enumerate}
\paragraph{Internal}
\begin{enumerate}
    \item Internal control signals
\end{enumerate}


\subsubsection{Preprocessor}
\subitem{
    The Preprocessor submodule is responsible for preparing and conditioning inputs for the control loops,
    including filtering and validation of sensor data before it is used by the controllers.
}

\begin{enumerate}
% \paragraph{Functional Requirements}
    \item Consume raw sensor measurements as defined in XXX:location
    \item Output filtered sensor streams as defined in XXX:location
% \textbf{Energy}
    \item Execute within allocated CPU and power budgets.
% \textbf{Environments}
    \item Maintain performance across expected environmental conditions.
% \textbf{Safety}
    \item Filtering shall never mask critical fault indicators.
% \textbf{Structure}
    \item Modular design with clear interfaces.
% \textbf{Standards and Regulations}
    \item Follow applicable software development standards.
\end{enumerate}

\subsubsection{PVA Controller}
\subitem{
    The PVA (Position/Velocity/Acceleration) Controller submodule computes control setpoints to track
    planned trajectories and maintain the UAV along the desired path.
}

\begin{enumerate}
% \paragraph{Functional Requirements}
    \item Consume waypoints and state estimates as defined in XXX:location
    \item Output actuator-level setpoints as defined in XXX:location
% \textbf{Energy}
    \item Execute within allocated CPU and power budgets.
% \textbf{Environments}
    \item Maintain performance across expected environmental conditions.
% \textbf{Safety}
    \item Ensure bounded errors and safe fallback when estimates are invalid.
% \textbf{Structure}
    \item Modular design with clear interfaces.
% \textbf{Standards and Regulations}
    \item Follow applicable software development standards.
\end{enumerate}

\subsubsection{ATL Controller}
\subitem{
    The ATL (Axis/Attitude/Torque-Level) Controller submodule translates higher-level commands
    into low-level actuator demands, respecting actuator limits and constraints.
}

\begin{enumerate}
% \paragraph{Functional Requirements}
    \item Consume desired attitude and torque references as defined in XXX:location
    \item Output low-level actuator commands as defined in XXX:location
% \textbf{Energy}
    \item Execute within allocated CPU and power budgets.
% \textbf{Environments}
    \item Maintain performance across expected environmental conditions.
% \textbf{Safety}
    \item Enforce actuator limits and safe modes under faults.
% \textbf{Structure}
    \item Modular design with clear interfaces.
% \textbf{Standards and Regulations}
    \item Follow applicable software development standards.
\end{enumerate}

\subsubsection{Control Distributor}
\subitem{
    The Control Distributor submodule routes control outputs to the correct actuator channels,
    mapping logical control channels to physical hardware outputs.
}

\begin{enumerate}
% \paragraph{Functional Requirements}
    \item Consume controller output commands as defined in XXX:location
    \item Output hardware actuator signals as defined in XXX:location
% \textbf{Energy}
    \item Execute within allocated CPU and power budgets.
% \textbf{Environments}
    \item Maintain performance across expected environmental conditions.
% \textbf{Safety}
    \item Prevent misrouting; provide diagnostics and traceability.
% \textbf{Structure}
    \item Modular design with clear interfaces.
% \textbf{Standards and Regulations}
    \item Follow applicable software development standards.
\end{enumerate}

% \subsubsection{Functional Requirements}
%     \begin{enumerate}
%         \item Compute actuator setpoints from planned trajectories and state estimates.
%         \item Implement required control algorithms and scheduling.
%     \end{enumerate}

% \subsubsection{Non-Functional Requirements}

% \textbf{Energy}
% \begin{enumerate}
%     \item Execute within the control loop CPU and power budgets.
% \end{enumerate}

% \textbf{Environments}
% \begin{enumerate}
%     \item Maintain stability across environmental conditions and sensor noise.
% \end{enumerate}

% \textbf{Safety}
% \begin{enumerate}
%     \item Ensure bounded outputs and safe behavior under saturation and faults.
% \end{enumerate}

% \textbf{Structure}
% \begin{enumerate}
%     \item Modular controller design with clear scheduling and interfaces.
% \end{enumerate}

% \textbf{Standards and Regulations}
% \begin{enumerate}
%     \item Follow applicable control and software standards.
% \end{enumerate}

%%% End Controller